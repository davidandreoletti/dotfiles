# Cheatsheet:
# C-b x		Confirm before kill pane
# C-b q		Display panes
# C-b <space>	Next layout (split panes horizontal if panes were vertically splitted and inversely)
# C-b "		Split Window vertically
# C-b %		Split Window horizontally
# C-b c		New Window
# C-b &		Confirm before kill window
# C-b d		Detach client and quit tmux (but leave tmux session running)
# C-b : 	Command prompt
# C-b C-o	Rotate Panes location in current window
# C-b o     Switch active pane to next pane
# C-b #		List of paste buffers
# C-b $ 	Rename the current session
# C-b [0..9]	Select window 0 to 9
# C-b C[arrow]	Resize pane
# C-b k     Clear Terminal and Terminal history
# C-b :source-file ~/.tmux.conf Reload tmux configuration file
# C-b z     Zoom (temporaly) current pane to 100% window size (tmux 1.8+)
# C-b :break-pane   Break current pane in new window
# C-b :join-pane -t [window]   Join current pane in window [window]

# Sources:
# - http://arcoleo.org/dsawiki/Wiki.jsp?page=Tmux%20Reference


# Remaps prefix to Control + a
set-option -g prefix C-a
unbind C-b
bind C-a send-prefix

# Reloads tmux's user conf
bind r source-file ~/.tmux.conf

# Theme (until I switched to powerline)
set-option -g status-bg red
set-option -g status-fg white
set-option -g status-interval 60
set-option -g status-left-length 30
set-option -g status-left '#[fg=green](#S) #(whoami)@#H#[default]'
set-option -g status-right '#[fg=yellow]#(cut -d " " -f 1-3 /proc/loadavg)#[default] #[fg=blue]%H:%M#[default]'

set -g pane-active-border-fg blue

# Set correct term
set-option -g default-terminal screen-256color

# Automatically set window title
set-option -g set-titles on

# Automatically rename window
set-window-option -g automatic-rename on

# Enable vi style key bindings
set-window-option -g mode-keys vi

# Highlight window with activity
set-window-option -g monitor-activity on

# Hightlight current window using specified color
set-window-option -g window-status-current-bg magenta

# Window numbering start at 1
set-option -g base-index 1

# Aggressive resize instead of having all windows in a session contraint to the 
# size of the smallest client connected to the session even if both clients
# are looking at a different window.
setw -g aggressive-resize on

# Maximung number of lines held in Window history
set-option -g history-limit 199999

# Faster command sequence
set -s escape-time 0

# Enable vi style copy/paste
unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer
bind-key -t vi-copy 'v' begin-selection
bind-key -t vi-copy 'y' copy-selection

# Clear history like Terminal's Cmd+k
# Inspired from: http://stackoverflow.com/questions/10543684/how-can-i-clear-scrollback-buffer-in-tmux
bind k send-keys C-u \; send-keys C-k \; send-keys " clear && tmux clear-history" \; send-keys "Enter" \; run-shell "sleep .3s" \; send-keys "Up" \; send-keys C-u

