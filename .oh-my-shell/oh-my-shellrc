#
# Bash shell:
#
# - OSX:      . ~/.oh-my-shell/oh-my-shellrc into ~/.bash_profile ("Interactive Login"/"Interactive" shell)
# - Ubuntu:   . ~/.oh-my-shell/oh-my-shellrc into ~/.bash_profile ("Interactive Login" shell)
#                                               into ~/.bashrc       ("Interactive" shell)
# ZSH shell:
#
# - OSX:      . ~/.oh-my-shell/oh-my-shellrc into ~/.zshrc ("Interactive Login"/"Interactive" shell)
# - Ubuntu:   . ~/.oh-my-shell/oh-my-shellrc into ~/.zshrc ("Interactive Login" shell)
#
# Source: http://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/
#         http://tanguy.ortolo.eu/blog/article25/shrc
#

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

SHELLRC_ROOT_DIR="${HOME}/.oh-my-shell"
SHELLRC_SHELLRC_DIR="${SHELLRC_ROOT_DIR}/shellrc"
SHELLRC_BOOTSTRAP_DIR="${SHELLRC_SHELLRC_DIR}/bootstrap"
SHELLRC_PLUGINS_DIR="${SHELLRC_SHELLRC_DIR}/plugins"

# Load boostrap 
. "${SHELLRC_BOOTSTRAP_DIR}/helper.sh"
dot_if_exists "${SHELLRC_BOOTSTRAP_DIR}/helper2.sh"
dot_if_exists "${SHELLRC_BOOTSTRAP_DIR}/helper3.sh"
dot_if_exists "${SHELLRC_BOOTSTRAP_DIR}/init.sh"

# Load shell plugins (part 1)
dot_current_shell_plugin_if_exists "environment"
dot_current_shell_plugin_if_exists "history"

# Load app plugins 
dot_plugin_if_exists "locale"
dot_plugin_if_exists "gnucoreutils"                 # Expose standard GNU tools, including to .oh-my-shellrc
dot_plugin_if_exists "dotfiles"                     # Expose DOTFILES_HOME, DOTFILES_PRIVATE_HOME to other plugins
dot_plugin_if_exists "android"
dot_plugin_if_exists "archive"
dot_plugin_if_exists "backup"
dot_plugin_if_exists "dropbox"
dot_plugin_if_exists "buku"                         # Depends on: dropbox
dot_plugin_if_exists "cat"
dot_plugin_if_exists "cd"
dot_plugin_if_exists "date"
dot_plugin_if_exists "debugging_shell_scripts"
dot_plugin_if_exists "diff"
dot_plugin_if_exists "docker"
dot_plugin_if_exists "download"
dot_plugin_if_exists "environment"
dot_plugin_if_exists "file_directory"
dot_plugin_if_exists "fzf"
dot_plugin_if_exists "git"
dot_plugin_if_exists "github"
dot_plugin_if_exists "gnused"
dot_plugin_if_exists "libiconv"
dot_plugin_if_exists "history"
dot_plugin_if_exists "homebrew"
dot_plugin_if_exists "image"
dot_plugin_if_exists "java"
dot_plugin_if_exists "kubernetes"                   # Requires: gnucoreutils
dot_plugin_if_exists "legacy"
dot_plugin_if_exists "fastlane"
dot_plugin_if_exists "ls"
dot_plugin_if_exists "man"
dot_plugin_if_exists "misc"
dot_plugin_if_exists "mv"
dot_plugin_if_exists "network"
dot_plugin_if_exists "nvm"
dot_plugin_if_exists "npm"                          # Loading dependency: nvm plugin
dot_plugin_if_exists "notebook"                     # Requires: dotfiles plugin
dot_plugin_if_exists "open"
dot_plugin_if_exists "process"
dot_plugin_if_exists "python"
dot_plugin_if_exists "rbenv"
dot_plugin_if_exists "ripgrep"
dot_plugin_if_exists "rm"
dot_plugin_if_exists "rsync"
dot_plugin_if_exists "sharefile"
dot_plugin_if_exists "search"
dot_plugin_if_exists "shell"
dot_plugin_if_exists "shorturl"
dot_plugin_if_exists "ssh"
dot_plugin_if_exists "tasklog"
dot_plugin_if_exists "telnet"
dot_plugin_if_exists "termbin"
dot_plugin_if_exists "translate"
dot_plugin_if_exists "theme"
dot_plugin_if_exists "tmux"
dot_plugin_if_exists "tree"
dot_plugin_if_exists "unixpermission"
dot_plugin_if_exists "vim_neovim"
dot_plugin_if_exists "weather"
dot_plugin_if_exists "xcode"
dot_plugin_if_exists "zip"

# Load shell plugins (part 2)
dot_current_shell_plugin_if_exists "completion" # Requires: gnucoreutils 
dot_current_shell_plugin_if_exists "correction"
dot_current_shell_plugin_if_exists "custom"

# Load <computer,user> shell specific config
dot_if_exists "${HOME}/.shellrc.sh"

# Load tmux by default
if [ -z "$TMUX" ]; then
    tmux "cwd"  # Requires: tmux plugin
fi
